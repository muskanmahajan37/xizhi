{"version":3,"sources":["components/Editor/StyleButton.tsx","commons/constants/poem.ts","commons/utils/editor.helper.ts","components/Editor/XizhiSidebar.tsx","pages/home/HomePage.tsx","pages/about/AboutPage.tsx","pages/todo/context.ts","pages/todo/components/TodoForm.tsx","pages/todo/reducer.ts","pages/todo/components/TodoHeader.tsx","pages/todo/components/TodoList.tsx","pages/todo/TodoPage.tsx","commons/hooks/usePersist.ts","components/NavBar/NavBar.tsx","App.tsx","serviceWorker.ts","index.tsx","pages/about/AboutPage.module.css"],"names":["StyleButton","onToggle","e","preventDefault","props","style","className","this","active","onMouseDown","label","React","Component","POEM","Segmentit","require","cnchar","EditorHelper","countWord","content","segment","Segment","useDefault","doSegment","replace","removeSpecialChar","getWordCount","str","sLen","length","getSentences","split","filter","s","map","calculateStroke","letters","stroke","calculateLevel","words","sentences","level","Math","round","XizhiSidebar","editorState","blockArray","getCurrentContent","getBlocksAsArray","getPlainText","plainText","splitWords","getSplitWords","splitSentences","wordCount","strokesNumber","getReadingTime","getLineCount","BLOCK_TYPES","INLINE_STYLES","InlineStyleControls","currentStyle","getCurrentInlineStyle","type","key","has","BlockStyleControls","selection","getSelection","blockType","getBlockForKey","getStartKey","getType","HomePage","onChange","setState","focus","state","EditorState","createWithContent","ContentState","createFromText","RichUtils","toggleBlockType","inlineStyle","toggleInlineStyle","getDefaultKeyBinding","command","newState","handleKeyCommand","block","console","log","contentState","hasText","getBlockMap","first","bind","onClick","readOnly","keyBindingFn","mapKeyToEditorCommand","blockStyleFn","getBlockStyle","AboutPage","styles","base","Store","createContext","todos","TodoForm","dispatch","useContext","useState","todo","setTodo","handleTodoAdd","payload","value","autoFocus","placeholder","onKeyUp","event","keyCode","target","reducer","action","includes","t","TodoHeader","children","TodoList","count","header","marginLeft","TodoPage","globalStore","context","persistedContext","localStorage","getItem","JSON","parse","usePersistedContext","TodoStore","useEffect","setItem","stringify","usePersistedReducer","useReducer","Provider","NavBar","current","handleClick","exact","path","component","App","Boolean","window","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","module","exports"],"mappings":"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","file":"static/js/main.2e4179f4.chunk.js","sourcesContent":["import React from \"react\";\n\nexport class StyleButton extends React.Component<any, any> {\n  onToggle = (e: any) => {\n    e.preventDefault();\n    this.props.onToggle(this.props.style);\n  };\n\n  render() {\n    let className = 'RichEditor-styleButton';\n    if (this.props.active) {\n      className += ' RichEditor-activeButton';\n    }\n    return (\n      <span className={className} onMouseDown={this.onToggle}>\n              {this.props.label}\n            </span>\n    );\n  }\n}\n","export const POEM = `永和九年，岁在癸丑，暮春之初，会于会稽山阴之兰亭，修稧（禊）事也。群贤毕至，少长咸集。此地有崇山峻领（岭），茂林修竹；又有清流激湍，映带左右，引以为流觞曲水，列坐其次。虽无丝竹管弦之盛，一觞一咏，亦足以畅叙幽情。\n\n是日也，天朗气清，惠风和畅。仰观宇宙之大，俯察品类之盛。所以游目骋怀，足以极视听之娱，信可乐也。\n\n夫人之相与，俯仰一世，或取诸怀抱，悟言一室之内；或因寄所托，放浪形骸之外。虽趣（取/趋）舍万殊，静躁不同，当其欣于所遇，暂得于己，怏然自足，不知老之将至；及其所之既倦，情随事迁，感慨系之矣。向之所欣，俯仰之间，已为陈迹，犹不能不以之兴怀；况修短随化，终期于尽。古人云：“死生亦大矣。”岂不痛哉！\n\n每揽（览）昔人兴感之由，若合一契，未尝不临文嗟悼，不能喻之于怀。固知一死生为虚诞，齐彭殇为妄作。后之视今，亦由（犹）今之视昔，悲夫！故列叙时人，录其所述，虽世殊事异，所以兴怀，其致一也。后之揽（览）者，亦将有感于斯文。\n`;\n\n","const Segmentit = require('segmentit');\nconst cnchar = require('cnchar');\n\nfunction countWord(content: string) {\n  let segment = new Segmentit.Segment();\n  const segmentit = Segmentit.useDefault(segment);\n  const result = segmentit.doSegment(removeSpecialChar(content));\n  return result;\n}\n\nfunction removeSpecialChar(content: string) {\n  // 匹配这些中文标点符号 。 ？ ！ ， 、 ； ： “ ” ‘ ' （ ） 《 》 〈 〉 【 】 『 』 「 」 ﹃ ﹄ 〔 〕 … — ～ ﹏ ￥\n  var chineseSpecialChar = /[\\u3002|\\uff1f|\\uff01|\\uff0c|\\u3001|\\uff1b|\\uff1a|\\u201c|\\u201d|\\u2018|\\u2019|\\uff08|\\uff09|\\u300a|\\u300b|\\u3008|\\u3009|\\u3010|\\u3011|\\u300e|\\u300f|\\u300c|\\u300d|\\ufe43|\\ufe44|\\u3014|\\u3015|\\u2026|\\u2014|\\uff5e|\\ufe4f|\\uffe5]/g;\n  var othersSpecialChar = /\\//g;\n  return content.replace(chineseSpecialChar, '')\n    .replace(othersSpecialChar, '');\n}\n\nfunction getSentences(content: string) {\n  let sentences = content\n    .split(\"。\")\n    .filter(s => s.length > 0)\n    .map(s => s + \"。\");\n  return sentences;\n}\n\nfunction getWordCount(str: string) {\n  // https://blog.csdn.net/gavid0124/article/details/38117381\n  let sLen = 0;\n  try {\n    //先将回车换行符做特殊处理\n    str = str.replace(/(\\r\\n+|\\s+|　+)/g, \"龘\");\n    //处理英文字符数字，连续字母、数字、英文符号视为一个单词\n    // eslint-disable-next-line no-control-regex\n    str = str.replace(/[\\x00-\\xff]/g, \"m\");\n    //合并字符m，连续字母、数字、英文符号视为一个单词\n    str = str.replace(/m+/g, \"*\");\n    //去掉回车换行符\n    str = str.replace(/龘+/g, \"\");\n    //返回字数\n    sLen = str.length;\n  } catch (e) {\n    return 0;\n  }\n  return sLen;\n}\n\nfunction calculateLevel(letters: number, words: number, sentences: number) {\n  if (letters === 0 || words === 0 || sentences === 0) {\n    return 0;\n  }\n  // 中文，来源：https://patents.google.com/patent/CN105630940A/zh\n  // 文本可读性=MX (NX中文平均笔画数+(1-N) X中文难词频度) + (1-Μ) X (PX英文平 均字符数+(1-P) X英文难词频度）\n  //\n  // https://www.webfx.com/tools/read-able/automated-readability-index.html\n  let level = Math.round(\n    4.71 * (letters / words) + 0.5 * words / sentences - 21.43\n  );\n  return level <= 0 ? 0 : level;\n}\n\nfunction calculateStroke(letters: string) {\n  return cnchar.stroke(letters);\n}\n\nconst EditorHelper = {\n  countWord: countWord,\n  getWordCount: getWordCount,\n  getSentences: getSentences,\n  calculateStroke: calculateStroke,\n  calculateLevel: calculateLevel\n};\nexport default EditorHelper;\n","import React from \"react\";\nimport {EditorState} from \"draft-js\";\n\nimport './XizhiSidebar.css';\nimport EditorHelper from \"../../commons/utils/editor.helper\";\n\nexport class XizhiSidebar extends React.Component<any, any> {\n  getLineCount(editorState: EditorState) {\n    const blockArray = editorState.getCurrentContent().getBlocksAsArray();\n    return blockArray ? blockArray.length : null;\n  }\n\n  getReadingTime(editorState: EditorState) {\n    let str = editorState.getCurrentContent().getPlainText('');\n    return `~${Math.round(str.length / 400)} 分钟`; // 400/minute\n  }\n\n  getSplitWords(editorState: EditorState) {\n    // return EditorHelper.countWord(editorState.getCurrentContent().getPlainText());\n    return [];\n  }\n\n  render() {\n    const editorState: EditorState = this.props.editorState;\n    let plainText = editorState.getCurrentContent().getPlainText('');\n\n    let splitWords = this.getSplitWords(editorState);\n    let splitSentences = EditorHelper.getSentences(plainText);\n    // let splitWords = 'null';\n    let wordCount = EditorHelper.getWordCount(plainText);\n    let strokesNumber = EditorHelper.calculateStroke(plainText);\n    let level = EditorHelper.calculateLevel(strokesNumber, splitWords.length, splitSentences.length);\n\n    return (\n      <div className=\"xizhi-sidebar\">\n        <div className=\"stats\">\n          <p className=\"complex\">\n            复杂度：{level}\n          </p>\n          <p className=\"counts\">\n            阅读时间：{this.getReadingTime(editorState)};\n          </p>\n          <p className=\"counts\">\n            字数：{wordCount};\n          </p>\n          <p className=\"words-counts\">\n            字/词语数：{splitWords.length};\n          </p>\n          <p className=\"counts\">\n            行数：{this.getLineCount(editorState)};\n          </p>\n          <p className=\"sentence-counts\">\n            句子数：{splitSentences.length};\n          </p>\n        </div>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport {Editor, EditorState, ContentState, RichUtils, getDefaultKeyBinding} from 'draft-js';\nimport {StyleButton} from '../../components/Editor/StyleButton';\nimport {POEM} from \"../../commons/constants/poem\";\nimport {XizhiSidebar} from '../../components/Editor/XizhiSidebar';\n\nconst BLOCK_TYPES = [\n  {label: 'H1', style: 'header-one'},\n  {label: 'H2', style: 'header-two'},\n  {label: 'H3', style: 'header-three'},\n  {label: 'Quote', style: 'blockquote'},\n  {label: \"Bullets\", style: \"unordered-list-item\"},\n  {label: \"Numbers\", style: \"ordered-list-item\"}\n];\n\nconst INLINE_STYLES = [\n  {label: 'Bold', style: 'BOLD'},\n  {label: 'Italic', style: 'ITALIC'}\n];\n\nconst InlineStyleControls = (props: any) => {\n  const currentStyle = props.editorState.getCurrentInlineStyle();\n\n  return (\n    <div className=\"xizhi-inline-controls\">\n      {INLINE_STYLES.map((type) =>\n        <StyleButton\n          key={type.label}\n          active={currentStyle.has(type.style)}\n          label={type.label}\n          onToggle={props.onToggle}\n          style={type.style}\n        />\n      )}\n    </div>\n  );\n};\n\nconst BlockStyleControls = (props: any) => {\n  const {editorState} = props;\n  const selection = editorState.getSelection();\n  const blockType = editorState\n    .getCurrentContent()\n    .getBlockForKey(selection.getStartKey())\n    .getType();\n  return (\n    <div className=\"xizhi-block-controls\">\n      {BLOCK_TYPES.map((type) =>\n        <StyleButton\n          key={type.label}\n          active={type.style === blockType}\n          label={type.label}\n          onToggle={props.onToggle}\n          style={type.style}\n        />\n      )}\n    </div>\n  );\n};\n\nclass HomePage extends React.Component <{}, any> {\n  constructor(props: any) {\n    super(props);\n    this.state = {\n      editorState: EditorState.createWithContent(\n        ContentState.createFromText(POEM)\n      )\n    };\n  }\n\n  onChange = (editorState: EditorState) => {\n    return this.setState({editorState});\n  };\n\n  toggleBlockType(blockType: any) {\n    this.onChange(\n      RichUtils.toggleBlockType(\n        this.state.editorState,\n        blockType\n      )\n    );\n  }\n\n  toggleInlineStyle(inlineStyle: any) {\n    this.onChange(\n      RichUtils.toggleInlineStyle(\n        this.state.editorState,\n        inlineStyle\n      )\n    );\n  }\n\n  focus = () => {\n    // return this.refs.editor.focus();\n  };\n\n  mapKeyToEditorCommand(e: any) {\n    return getDefaultKeyBinding(e);\n  }\n\n  handleKeyCommand(command: any, editorState: EditorState) {\n    const newState = RichUtils.handleKeyCommand(editorState, command);\n    if (newState) {\n      this.onChange(newState);\n      return \"handled\";\n    }\n    return \"not-handled\";\n  }\n\n  getBlockStyle(block: any) {\n    switch (block.getType()) {\n      case 'blockquote':\n        return 'RichEditor-blockquote';\n      default:\n        return '';\n    }\n  }\n\n  render() {\n    console.log(this.state);\n    const {editorState} = this.state;\n\n    // If the user changes block type before entering any text, we can\n    // either style the placeholder or hide it. Let's just hide it now.\n    let className = 'RichEditor-editor';\n    var contentState = editorState.getCurrentContent();\n    if (!contentState.hasText()) {\n      if (contentState.getBlockMap().first().getType() !== 'unstyled') {\n        className += ' RichEditor-hidePlaceholder';\n      }\n    }\n\n    return (\n      <div className=\"Xizhi-container\">\n        <div className=\"XizhiEditor-root\">\n          <div className=\"xizhi-toolbar\">\n            <InlineStyleControls\n              editorState={editorState}\n              onToggle={this.toggleInlineStyle.bind(this)}\n            />\n            <BlockStyleControls\n              editorState={editorState}\n              onToggle={this.toggleBlockType.bind(this)}\n            />\n          </div>\n          <div className={className} onClick={this.focus}>\n            <Editor\n              readOnly={true}\n              editorState={editorState}\n              handleKeyCommand={this.handleKeyCommand.bind(this)}\n              keyBindingFn={this.mapKeyToEditorCommand.bind(this)}\n              blockStyleFn={this.getBlockStyle.bind(this)}\n              onChange={this.onChange}/>\n          </div>\n        </div>\n        <XizhiSidebar editorState={editorState}/>\n      </div>\n    )\n  };\n}\n\nexport default HomePage;\n","import React, { Component } from 'react';\nimport styles from './AboutPage.module.css';\n\nclass AboutPage extends Component {\n  render() {\n    return (\n      <div className={styles.base}>\n        about\n      </div>\n    )\n  };\n}\n\nexport default AboutPage;\n","import React from \"react\";\n\nconst Store = React.createContext({\n  todos: [\n    \"Buy milk\",\n    \"Some eggs\",\n    \"Go to work\"\n  ]\n});\n\nexport default Store;\n","import React, {useContext, useState} from 'react';\nimport Store from \"../context\";\n\nexport default function TodoForm() {\n  const { dispatch } = useContext(Store) as any;\n\n  // Creating a local state to have currently writing\n  // todo item that will be sent to the global store.\n  const [todo, setTodo] = useState(\"\");\n\n  function handleTodoChange(e: React.ChangeEvent<HTMLInputElement>) {\n    setTodo(e.target.value);\n  }\n\n  function handleTodoAdd() {\n    dispatch({ type: \"ADD_TODO\", payload: todo });\n    setTodo(\"\");\n  }\n\n  function handleSubmitForm(event: any) {\n    if (event.keyCode === 13) handleTodoAdd();\n  }\n\n  return (\n    <div className=\"row\">\n      <div className=\"col-md-12\">\n        <br />\n        <div className=\"input-group\">\n          <input\n            className=\"form-control\"\n            value={todo}\n            autoFocus={true}\n            placeholder=\"Enter new todo\"\n            onKeyUp={handleSubmitForm}\n            onChange={handleTodoChange}\n          />\n          <div className=\"input-group-append\">\n            <button className=\"btn btn-primary\" onClick={handleTodoAdd}>\n              Add\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","export default function reducer(state: any, action: any) {\n  switch (action.type) {\n    case \"ADD_TODO\":\n      // return current state if empty\n      if (!action.payload) {\n        return state;\n      }\n      // return current state if duplicate\n      if (state.todos.includes(action.payload)) {\n        return state;\n      }\n      return {\n        ...state,\n        todos: [...state.todos, action.payload]\n      };\n    case \"COMPLETE\":\n      return {\n        ...state,\n        todos: state.todos.filter((t: any) => {\n          return t !== action.payload\n        })\n      };\n    default:\n      return state;\n  }\n}\n","import React from \"react\";\n\nexport const TodoHeader = (props: any) => (\n  <div className=\"row\">\n    <div className=\"col-md-8\">\n      <h5>Todo List</h5>\n    </div>\n    <div className=\"col-md-4\">\n      {props.children}\n    </div>\n  </div>\n);\n","import React, { useContext } from \"react\";\nimport Store from \"../context\";\nimport { TodoHeader } from \"./TodoHeader\";\n\nexport default function TodoList() {\n  // @ts-ignore\n  const { state, dispatch } = useContext(Store);\n\n  const pluralize = (count: any) =>\n    count > 1 ? `There are ${count} todos.` : `There is ${count} todo.`;\n\n  let header =\n    state.todos.length === 0 ? (\n      <h4>Yay! All todos are done! Take a rest!</h4>\n    ) : (\n      <TodoHeader>\n        <span className=\"float-right\">{pluralize(state.todos.length)}</span>\n      </TodoHeader>\n    );\n  return (\n    <div className=\"row\">\n      <div className=\"col-md-12\">\n        <div className=\"row\">\n          <div className=\"col-md-12\">\n            <br />\n            {header}\n          </div>\n        </div>\n        <div className=\"row\">\n          <div className=\"col-md-12\">\n            <ul className=\"list-group\">\n              {state.todos.map((t: any) => (\n                <li key={t} className=\"list-group-item\">\n                  {t}\n                  <button\n                    className=\"float-right btn btn-danger btn-sm\"\n                    style={{ marginLeft: 10 }}\n                    onClick={() => dispatch({ type: \"COMPLETE\", payload: t })}\n                  >\n                    Complete\n                  </button>\n                </li>\n              ))}\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React, {useContext, useReducer} from 'react';\n\nimport TodoForm from \"./components/TodoForm\";\nimport {usePersistedContext, usePersistedReducer} from \"../../commons/hooks/usePersist\";\nimport TodoStore from \"./context\";\nimport reducer from \"./reducer\";\nimport TodoList from \"./components/TodoList\";\n\nfunction TodoPage() {\n  // create a global store to store the state\n  const globalStore = usePersistedContext(useContext(TodoStore), \"state\");\n\n  // `todos` will be a state manager to manage state.\n  const [state, dispatch, todos] = usePersistedReducer(\n    useReducer(reducer, globalStore),\n    \"state\" // The localStorage key\n  );\n\n  return (\n    // @ts-ignore\n    <TodoStore.Provider value={{state, dispatch, todos}}>\n      <TodoForm />\n      <TodoList />\n    </TodoStore.Provider>\n  );\n}\n\nexport default TodoPage;\n","import {useEffect} from \"react\";\n\nexport function usePersistedContext(context: any, key = \"state\") {\n  const persistedContext = localStorage.getItem(key);\n  return persistedContext ? JSON.parse(persistedContext) : context;\n}\n\nexport function usePersistedReducer([state, dispatch]: any, key = \"state\") {\n  useEffect(() => localStorage.setItem(key, JSON.stringify(state)), [key, state]);\n  return [state, dispatch];\n}\n","import React, {Component} from 'react';\nimport {BrowserRouter as Router, Route} from 'react-router-dom';\nimport HomePage from '../../pages/home/HomePage';\nimport AboutPage from \"../../pages/about/AboutPage\";\nimport TodoPage from \"../../pages/todo/TodoPage\";\n\nclass NavBar extends Component {\n  state = {\n    current: 'mail',\n  };\n\n  handleClick = (e: any) => {\n    console.log('click ', e);\n    this.setState({\n      current: e.key,\n    });\n  };\n\n  render() {\n    return (\n      <Router>\n        {/*<Menu onClick={this.handleClick} selectedKeys={[this.state.current]} mode=\"horizontal\">*/}\n        {/*  <Menu.Item key=\"app\">*/}\n        {/*    <Link to=\"/\"><Icon type=\"home\"/> Home</Link>*/}\n        {/*  </Menu.Item>*/}\n        {/*  <Menu.Item key=\"about\">*/}\n        {/*    <Link to=\"/about\"><Icon type=\"question\"/>About</Link>*/}\n        {/*  </Menu.Item>*/}\n        {/*  <Menu.Item key=\"todo\">*/}\n        {/*    <Link to=\"/todo\"><Icon type=\"todo\"/>Todo</Link>*/}\n        {/*  </Menu.Item>*/}\n        {/*</Menu>*/}\n\n        <Route exact path=\"/\" component={HomePage}/>\n        <Route exact path=\"/about\" component={AboutPage}/>\n        <Route exact path=\"/todo\" component={TodoPage}/>\n      </Router>\n    );\n  }\n}\n\nexport default NavBar;\n","import React from 'react';\n\nimport './App.css';\nimport NavBar from \"./components/NavBar/NavBar\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <NavBar></NavBar>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.less';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"base\":\"AboutPage_base__24ewQ\"};"],"sourceRoot":""}